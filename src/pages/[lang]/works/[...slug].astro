---
import { getCollection } from "astro:content";
import MarkdownLayout from "@layouts/Markdown.astro";

export const prerender = true;

const { lang, slug } = Astro.params;

const pages = await getCollection("works", ({ id }) => {
  return id.startsWith(`${lang}`);
});

const page = pages.find((page) => page.slug === slug);

if (page === undefined) {
  return Astro.redirect("/404");
}

const { Content } = await page.render();
---

<MarkdownLayout frontmatter={page.data}>
  <Content />
</MarkdownLayout>
