---
import Layout from "@layouts/Layout.astro";
import BlogPostPreview from "@components/BlogPostPreview.astro";
import { getCollection } from "astro:content";
import { getLangFromUrl, useTranslations } from "@i18n/utils";

export const prerender = false;

const lang = getLangFromUrl(Astro.url);

const t = useTranslations(lang);

const posts = await getCollection("posts", ({ id }) => {
  return id.startsWith(`${lang}/`);
});
---

<Layout pageTitle="Posts" pageDescription="List of posts" pageType="website">
  <div>
    {posts.map((post) => <BlogPostPreview post={post} />)}
    <a rel="prefetch" class="text-white" href={`posts/2`}>More Posts</a>
  </div>
</Layout>
